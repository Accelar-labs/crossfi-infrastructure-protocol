"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.readSchemas = void 0;

var _glob = require("glob");

var _fs = require("fs");

var readSchemas = function readSchemas(_ref) {
  var schemaDir = _ref.schemaDir,
      argv = _ref.argv;
  var files = (0, _glob.sync)(schemaDir + '/**/*.json');
  var schemas = files.map(function (file) {
    return JSON.parse((0, _fs.readFileSync)(file, 'utf-8'));
  });

  if (argv.packed) {
    if (schemas.length !== 1) {
      throw new Error('packed option only supports one file');
    }

    return Object.values(schemas[0]);
  }

  return schemas;
};

exports.readSchemas = readSchemas;